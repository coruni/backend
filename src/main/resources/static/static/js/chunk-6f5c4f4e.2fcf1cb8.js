(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f5c4f4e"],{2390:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{inline:"",size:"small"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSave}},[e._v("添加")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onGive}},[e._v("赋予")])],1)],1),a("el-table",{staticStyle:{width:"100%","border-radius":"5px"},attrs:{data:e.rankList.data,"max-height":"720",size:"mini",border:"","header-cell-style":{background:"#409EFF",color:"#ffffff"}}},[a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"头衔",prop:"name"}}),a("el-table-column",{attrs:{label:"类型 （仅一个生效）",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"==t.row.type?"文字":"图片")+" ")]}}])}),a("el-table-column",{attrs:{label:"文字颜色",prop:"color"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:t.row.color}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"背景颜色",prop:"background"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{background:t.row.background}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"图片",prop:"image"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.image,fit:"contain"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.updateDialog=!0,e.rank=t.row}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.messageNotice(t.row.id)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.diglogVisible,width:"40%",title:"添加"},on:{"update:visible":function(t){e.diglogVisible=t}}},[a("el-form",{ref:"form",staticClass:"app-container",model:{value:e.rank,callback:function(t){e.rank=t},expression:"rank"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.rank.name,callback:function(t){e.$set(e.rank,"name",t)},expression:"rank.name"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:e.rank.type,callback:function(t){e.$set(e.rank,"type",t)},expression:"rank.type"}},[a("el-option",{attrs:{label:"文字",value:0}}),a("el-option",{attrs:{label:"图片",value:1}})],1)],1),1==e.rank.type?a("el-form-item",{attrs:{label:"图片","label-width":"50px"}},[a("el-upload",{attrs:{action:"/upload/full",beforeAvatarUpload:e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,headers:{Authorization:e.getToken()},"show-file-list":!1}},[e.rank.image?a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.rank.image,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1):e._e(),0==e.rank.type?a("el-form-item",{attrs:{label:"文字颜色"}},[a("el-color-picker",{model:{value:e.rank.color,callback:function(t){e.$set(e.rank,"color",t)},expression:"rank.color"}})],1):e._e(),0==e.rank.type?a("el-form-item",{attrs:{label:"文字背景"}},[a("el-color-picker",{model:{value:e.rank.background,callback:function(t){e.$set(e.rank,"background",t)},expression:"rank.background"}})],1):e._e(),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.save()}}},[e._v("添加")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.updateDialog,width:"40%",title:"更新"},on:{"update:visible":function(t){e.updateDialog=t}}},[a("el-form",{ref:"form",staticClass:"app-container",model:{value:e.rank,callback:function(t){e.rank=t},expression:"rank"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.rank.name,callback:function(t){e.$set(e.rank,"name",t)},expression:"rank.name"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:e.rank.type,callback:function(t){e.$set(e.rank,"type",t)},expression:"rank.type"}},[a("el-option",{attrs:{label:"文字",value:0}}),a("el-option",{attrs:{label:"图片",value:1}})],1)],1),1==e.rank.type?a("el-form-item",{attrs:{label:"图片","label-width":"50px"}},[a("el-upload",{attrs:{action:"/upload/full",beforeAvatarUpload:e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,headers:{Authorization:e.getToken()},"show-file-list":!1}},[e.rank.image?a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.rank.image,fit:"contain"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1):e._e(),0==e.rank.type?a("el-form-item",{attrs:{label:"文字颜色"}},[a("el-color-picker",{model:{value:e.rank.color,callback:function(t){e.$set(e.rank,"color",t)},expression:"rank.color"}})],1):e._e(),0==e.rank.type?a("el-form-item",{attrs:{label:"文字背景"}},[a("el-color-picker",{model:{value:e.rank.background,callback:function(t){e.$set(e.rank,"background",t)},expression:"rank.background"}})],1):e._e(),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.update()}}},[e._v("更新")])],1)],1)],1),a("el-dialog",{attrs:{title:"赋予",visible:e.giveDialog,width:"60%"},on:{"update:visible":function(t){e.giveDialog=t}}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"输入用户id搜索用户",size:"small","prefix-icon":"el-icon-search"},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"sucess",size:"small"},on:{click:function(t){return e.getUser()}}},[e._v("搜索")])],1)],1),a("div",{staticClass:"text-line",staticStyle:{"margin-top":"20px",display:"flex","flex-direction":"column"}},[a("span",[e._v("用户ID："+e._s(e.user.uid))]),a("span",[e._v("用户名："+e._s(e.user.name))]),a("span",[e._v("昵称："+e._s(e.user.screenName))])]),a("div",{staticStyle:{margin:"20px 0"}},[a("span",[e._v("选择赋予头衔")])]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.select_rank_id,callback:function(t){e.select_rank_id=t},expression:"select_rank_id"}},e._l(e.rankList.data,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.give}},[e._v(" 赋予")])],1)],1)],1)},r=[],l=a("c7eb"),i=a("1da1"),o=(a("9911"),a("5530")),s=a("b775");function c(e){return Object(s["a"])({url:"/rank/list",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/rank/add",method:"post",params:Object(o["a"])({},e)})}function p(e){return Object(s["a"])({url:"/rank/update",method:"post",params:Object(o["a"])({},e)})}function d(e){return Object(s["a"])({url:"/rank/delete",method:"post",params:Object(o["a"])({},e)})}function f(e,t){return Object(s["a"])({url:"/rank/give",method:"post",params:{user_id:e,id:t}})}var m=a("5f87"),k=a("c24f"),b={data:function(){return{rank:{name:"",type:0,color:"#000",background:"#000",image:""},select_rank_id:1,user_id:"",user:{name:"",uid:""},showRank:!1,rankList:{},diglogVisible:!1,updateDialog:!1,giveDialog:!1}},created:function(){this.getData()},methods:{getToken:m["a"],getData:function(){var e=this;c().then((function(t){console.log(t),e.rankList=t.data,console.log(e.rankList)}))},onSave:function(){this.diglogVisible=!0},onGive:function(){this.giveDialog=!0},save:function(){var e=this,t=this.rank;u(t).then((function(t){e.$message({message:"添加成功",type:"success"}),e.getData(),e.resetRank()}))},update:function(){var e=this,t=this.rank;p(t).then((function(t){e.$message({message:"添加成功",type:"success"}),e.getData(),e.resetRank()}))},messageNotice:function(e){var t=this;return Object(i["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("是否删除该头像框","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d({id:e});case 2:t.getData(),t.$message({type:"success",message:"删除成功"});case 4:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},handleAvatarSuccess:function(e,t){this.form.link=e.data.url},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},resetRank:function(){this.rank={name:"",type:0,color:"#000",background:"#000",image:""}},getUser:function(){var e=this;this.user_id&&Object(k["g"])(this.user_id).then((function(t){200==t.code&&(e.user=t.data)}))},give:function(){var e=this;f(this.user_id,this.select_rank_id).then((function(t){200==t.code&&e.$message({type:"success",message:"赋予成功"})}))}}},g=b,v=(a("8f78"),a("2877")),h=Object(v["a"])(g,n,r,!1,null,null,null);t["default"]=h.exports},"2e72":function(e,t,a){},"857a":function(e,t,a){var n=a("1d80"),r=/"/g;e.exports=function(e,t,a,l){var i=String(n(e)),o="<"+t;return""!==a&&(o+=" "+a+'="'+String(l).replace(r,"&quot;")+'"'),o+">"+i+"</"+t+">"}},"8f78":function(e,t,a){"use strict";a("2e72")},9911:function(e,t,a){"use strict";var n=a("23e7"),r=a("857a"),l=a("af03");n({target:"String",proto:!0,forced:l("link")},{link:function(e){return r(this,"a","href",e)}})},af03:function(e,t,a){var n=a("d039");e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}}}]);