(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df091276"],{"857a":function(e,t,a){var l=a("1d80"),r=/"/g;e.exports=function(e,t,a,o){var i=String(l(e)),n="<"+t;return""!==a&&(n+=" "+a+'="'+String(o).replace(r,"&quot;")+'"'),n+">"+i+"</"+t+">"}},9911:function(e,t,a){"use strict";var l=a("23e7"),r=a("857a"),o=a("af03");l({target:"String",proto:!0,forced:o("link")},{link:function(e){return r(this,"a","href",e)}})},af03:function(e,t,a){var l=a("d039");e.exports=function(e){return l((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},ceab:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{inline:"",size:"small"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSave}},[e._v("添加")])],1)],1),a("el-table",{staticStyle:{width:"100%","border-radius":"5px"},attrs:{data:e.list.data,"max-height":"720",size:"mini",border:"","header-cell-style":{background:"#409EFF",color:"#ffffff"}}},[a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),a("el-table-column",{attrs:{label:"头像框",prop:"link"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.link,fit:"fit"}})]}}])}),a("el-table-column",{attrs:{label:"创建者",prop:"creator"}}),a("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(0==t.row.type?"私人":"公开"))])]}}])}),a("el-table-column",{attrs:{label:"类型",prop:"permission"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(0==t.row.permission?"公开":"需要"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.form=t.row,e.updateDialog=!0}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.messageNotice(t.row.id)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","page-count":e.list.count,layout:"prev, pager, next",total:e.list.total},on:{"prev-click":function(t){e.page+=1,e.getData()},"next-click":function(t){e.page-=1,e.getData()},"current-change":function(t){e.page=t,e.getData()}}}),a("el-dialog",{attrs:{title:"添加",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"app-container",model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("el-form-item",{attrs:{label:"头像","label-width":"50px"}},[a("el-upload",{attrs:{action:"/upload/full",beforeAvatarUpload:e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,headers:{Authorization:e.getToken()},"show-file-list":!1}},[e.form.link?a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.form.link}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),a("el-form-item",{attrs:{label:"名称","label-width":"50px"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"类型","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"公开或者私人"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{value:0,label:"私人"}}),a("el-option",{attrs:{value:1,label:"公开"}})],1)],1),a("el-form-item",{attrs:{label:"权限","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"需要或不需要"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}},[a("el-option",{attrs:{value:0,label:"不需要"}}),a("el-option",{attrs:{value:1,label:"需要"}})],1)],1),a("el-form-item",{attrs:{label:"状态","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"关闭或开启"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{value:0,label:"停用"}}),a("el-option",{attrs:{value:1,label:"启用"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.save()}}},[e._v("添加")])],1)],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.updateDialog,width:"40%"},on:{"update:visible":function(t){e.updateDialog=t}}},[a("el-form",{ref:"form",staticClass:"app-container",model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("el-form-item",{attrs:{label:"头像","label-width":"50px"}},[a("el-upload",{attrs:{action:"/upload/full",beforeAvatarUpload:e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,headers:{Authorization:e.getToken()},"show-file-list":!1}},[e.form.link?a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.form.link}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),a("el-form-item",{attrs:{label:"名称","label-width":"50px"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"类型","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"公开或者私人"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{value:0,label:"私人"}}),a("el-option",{attrs:{value:1,label:"公开"}})],1)],1),a("el-form-item",{attrs:{label:"权限","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"需要或不需要"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}},[a("el-option",{attrs:{value:0,label:"不需要"}}),a("el-option",{attrs:{value:1,label:"需要"}})],1)],1),a("el-form-item",{attrs:{label:"状态","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"关闭或开启"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{value:0,label:"停用"}}),a("el-option",{attrs:{value:1,label:"启用"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.update()}}},[e._v("更新")])],1)],1)],1)],1)},r=[],o=a("c7eb"),i=a("1da1"),n=(a("d3b7"),a("9911"),a("b775"));function s(e){return Object(n["a"])({url:"/headpicture/list",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/headpicture/delete",method:"post",params:e})}function u(e){return Object(n["a"])({url:"/headpicture/add",method:"post",params:e})}function p(e){return Object(n["a"])({url:"/headpicture/update",method:"post",params:e})}var m=a("5f87"),f={data:function(){return{url:null,list:[],page:1,limit:10,form:{name:"",link:"",type:1,permission:0},dialogVisible:!1,updateDialog:!1}},created:function(){this.getData(),this.url="/"},methods:{onSave:function(){this.dialogVisible=!0},getToken:m["a"],getData:function(){var e=this,t={page:this.page,limit:this.limit};s(t).then((function(t){e.list=t.data}))},deleteHead:function(e){return new Promise((function(t,a){c({id:e}).then((function(e){t()}))}))},save:function(){var e=this;null!=this.form.link&&this.form.link&&u(this.form).then((function(t){e.$message({message:"添加成功",type:"success"}),e.resetForm()}))},update:function(){var e=this;p(this.form).then((function(t){e.$message({message:"添加成功",type:"success"}),e.resetForm()}))},resetForm:function(){this.form={name:"",link:"",type:1,permission:0}},messageNotice:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("是否删除该头像框","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.deleteHead(e);case 2:t.getData(),t.$message({type:"success",message:"删除成功"});case 4:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},handleAvatarSuccess:function(e,t){this.form.link=e.data.url},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t}}},d=f,b=a("2877"),h=Object(b["a"])(d,l,r,!1,null,null,null);t["default"]=h.exports}}]);