(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2093c384"],{1184:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"e",(function(){return s}));var n=a("5530"),r=a("b775");function l(t){return Object(r["a"])({url:"/raffle/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/raffle/delete",method:"post",params:Object(n["a"])({},t)})}function o(t){return Object(r["a"])({url:"/raffle/add",method:"post",params:Object(n["a"])({},t)})}function c(t){return Object(r["a"])({url:"/raffle/update",method:"post",params:Object(n["a"])({},t)})}function u(t){return Object(r["a"])({url:"/raffle/log",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/raffle/track",method:"post",params:Object(n["a"])({},t)})}},8593:function(t,e,a){"use strict";a.d(e,"h",(function(){return l})),a.d(e,"g",(function(){return i})),a.d(e,"i",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"j",(function(){return u})),a.d(e,"k",(function(){return s})),a.d(e,"e",(function(){return p})),a.d(e,"l",(function(){return f})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return m})),a.d(e,"d",(function(){return b})),a.d(e,"c",(function(){return h}));var n=a("5530"),r=a("b775");function l(t){return Object(r["a"])({url:"/install/check",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/install/install",method:"post",params:Object(n["a"])({},t)})}function o(t){return Object(r["a"])({url:"install/update",method:"post"})}function c(t){return Object(r["a"])({url:"/system/getApiConfig",method:"get",params:Object(n["a"])(Object(n["a"])({},t),{},{webkey:""})})}function u(t){return Object(r["a"])({url:"/system/apiConfigUpdate",method:"post",params:{params:t,webkey:""}})}function s(t){return Object(r["a"])({url:"/system/setupEmail",method:"post",params:{params:t,webkey:""}})}function p(){return Object(r["a"])({url:"/system/app",method:"post",params:{}})}function f(t){return Object(r["a"])({url:"/system/update",method:"post",params:{params:t,webkey:""}})}function d(t){return Object(r["a"])({url:"/system/appHomepage",method:"get",params:Object(n["a"])({},t)})}function m(t){return Object(r["a"])({url:"/system/appHomepageAdd",method:"post",params:Object(n["a"])({},t)})}function b(t){return Object(r["a"])({url:"/system/appHomepageUpdate",method:"post",params:Object(n["a"])({},t)})}function h(t){return Object(r["a"])({url:"/system/appHomepageDelete",method:"post",params:Object(n["a"])({},t)})}},b593:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:14}},[a("el-table",{staticStyle:{width:"100%",height:"500px"},attrs:{data:t.data,"max-height":"600"}},[a("el-table-column",{attrs:{label:"id",prop:"ID",width:"80"}}),a("el-table-column",{attrs:{label:"名称",prop:"name",width:"120"}}),a("el-table-column",{attrs:{label:"介绍",prop:"description",width:"120"}}),a("el-table-column",{attrs:{label:"类型",prop:"type",width:"120"}}),a("el-table-column",{attrs:{label:"数值",prop:"value",width:"120"}}),a("el-table-column",{attrs:{label:"数量",prop:"quantity",width:"120"}}),a("el-table-column",{attrs:{label:"概率",prop:"chance",width:"120"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.messageNotice(e.row.id)}}},[t._v("删除")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.edit=e.row}}},[t._v("编辑")])],1)]}}])})],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:10}},[a("el-form",{attrs:{model:t.edit}},[a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{attrs:{action:"/upload/full",beforeAvatarUpload:t.beforeAvatarUpload,"on-success":t.handleAvatarSuccess,headers:{Authorization:t.getToken()},"show-file-list":!1}},[t.edit.image?a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.edit.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),a("el-form-item",{attrs:{label:"名字",prop:"name"}},[a("el-input",{attrs:{placeholder:"奖品名称"},model:{value:t.edit.name,callback:function(e){t.$set(t.edit,"name",e)},expression:"edit.name"}})],1),a("el-form-item",{attrs:{label:"中奖几率（最多保留一位小数点）",prop:"chance"}},[a("el-input",{attrs:{placeholder:"中奖几率"},model:{value:t.edit.chance,callback:function(e){t.$set(t.edit,"chance",e)},expression:"edit.chance"}})],1),a("el-form-item",{attrs:{label:"奖励数值",prop:"value"}},[a("el-input",{attrs:{placeholder:"奖励数值"},model:{value:t.edit.value,callback:function(e){t.$set(t.edit,"value",e)},expression:"edit.value"}})],1),a("el-form-item",{attrs:{label:"奖品数量",prop:"quantity"}},[a("el-input",{attrs:{placeholder:"奖品数量"},model:{value:t.edit.quantity,callback:function(e){t.$set(t.edit,"quantity",e)},expression:"edit.quantity"}})],1),a("el-form-item",{attrs:{label:"奖品类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"奖品类型"},model:{value:t.edit.type,callback:function(e){t.$set(t.edit,"type",e)},expression:"edit.type"}},[a("el-option",{attrs:{value:"point",label:"积分"}}),a("el-option",{attrs:{value:"vip",label:"会员"}}),a("el-option",{attrs:{value:"product",label:"实物"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.edit&&t.edit.id?t.update():t.save()}}},[t._v("提交")])],1)],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{"font-weight":"600","margin-bottom":"20px"}},[t._v("每天抽奖次数")]),a("el-input",{attrs:{placeholder:"每天最多抽几次"},model:{value:t.config.raffleNum,callback:function(e){t.$set(t.config,"raffleNum",e)},expression:"config.raffleNum"}})],1),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{"font-weight":"600","margin-bottom":"20px"}},[t._v("抽奖消耗积分")]),a("el-input",{attrs:{placeholder:"抽奖消耗积分"},model:{value:t.config.raffleCoin,callback:function(e){t.$set(t.config,"raffleCoin",e)},expression:"config.raffleCoin"}})],1)],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateConfig()}}},[t._v("保存")])],1)],1)},r=[],l=a("c7eb"),i=a("1da1"),o=(a("d3b7"),a("1184")),c=a("8593"),u=a("5f87"),s={data:function(){return{data:[],limit:16,page:1,edit:{image:null,name:null,id:null,type:"point",chance:1,quantity:100,value:1},config:{raffleCoin:null,raffleNum:null}}},created:function(){this.getData()},methods:{getToken:u["a"],getData:function(){var t=this,e={limit:this.limit,page:this.page};Object(o["c"])(e).then((function(e){200==e.code&&(t.data=e.data.data)})),Object(c["f"])().then((function(e){console.log(e),t.config.raffleCoin=e.data.raffleCoin,t.config.raffleNum=e.data.raffleNum}))},handleAvatarSuccess:function(t,e){this.edit.image=t.data.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},messageNotice:function(t){var e=this;return Object(i["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$confirm("是否删除该奖品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.deleteRaffle(t);case 2:e.getData(),e.$message({type:"success",message:"删除成功"});case 4:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},deleteRaffle:function(t){return new Promise((function(e,a){Object(o["b"])({id:t}).then((function(t){e()}))}))},update:function(){var t=this,e=this.edit;Object(o["f"])(e).then((function(e){t.$message({message:"修改成功",type:"success"}),t.getData(),t.resetData()}))},save:function(){var t=this,e=this.edit;Object(o["a"])(e).then((function(e){t.$message({message:"添加成功",type:"success"}),t.getData(),t.resetData()}))},updateConfig:function(){var t=this,e=this.config;Object(c["j"])(e).then((function(e){t.$message({message:"配置保存成功",type:"success"})}))},resetData:function(){this.edit={image:null,name:null,id:null,type:"point",chance:1,quantity:100,value:1}}}},p=s,f=a("2877"),d=Object(f["a"])(p,n,r,!1,null,null,null);e["default"]=d.exports}}]);